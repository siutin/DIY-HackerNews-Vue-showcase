(function(e){function t(t){for(var o,r,s=t[0],i=t[1],u=t[2],f=0,l=[];f<s.length;f++)r=s[f],a[r]&&l.push(a[r][0]),a[r]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);d&&d(t);while(l.length)l.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(o=!1)}o&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a={app:0},c=[];function s(e){return i.p+"js/"+({about:"about",home:"home",story:"story"}[e]||e)+"."+{about:"5d688836",home:"e8f9fbd7",story:"1953d9c7"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={home:1,story:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var o="css/"+({about:"about",home:"home",story:"story"}[e]||e)+"."+{about:"31d6cfe0",home:"68b8c04a",story:"3ad812f5"}[e]+".css",r=i.p+o,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var s=a[c],u=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(u===o||u===r))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){s=f[c],u=s.getAttribute("data-href");if(u===o||u===r)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var o=t&&t.target&&t.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.request=o,n(a)},l.href=r;var d=document.getElementsByTagName("head")[0];d.appendChild(l)}).then(function(){r[e]=0}));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var c=new Promise(function(t,n){o=a[e]=[t,n]});t.push(o[2]=c);var u,f=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=s(e),u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+o+": "+r+")");c.type=o,c.request=r,n[1](c)}a[e]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,f.appendChild(l)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/diy-hackernews-vue-showcase/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],f=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=f;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"025e":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var o=n("1556"),r=function(e){return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))},a=function(e){return Object(o["a"])(new Date(1e3*e),new Date,{addSuffix:!0})}},"56d7":function(e,t,n){"use strict";n.r(t);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var o=n("2b0e"),r=n("d437"),a=n.n(r),c=n("d421"),s=n.n(c),i=n("5d92"),u=n.n(i),f=n("c713"),l=n.n(f),d=n("68d6"),p=n.n(d),m=n("d553"),h=n.n(m),b=n("6a6f"),g=n.n(b),S=n("e1f0"),_=n.n(S),v=n("9861"),y=n.n(v),T=n("341d"),w=n.n(T),E=n("5933"),O=n.n(E),P=n("12d0"),I=n.n(P),j=n("2330"),A=n.n(j);n("bf40");o["default"].use(a.a,{components:{VApp:s.a,VBtn:u.a,VCard:l.a,VDivider:p.a,VGrid:h.a,VIcon:g.a,VList:_.a,VMenu:y.a,VProgressCircular:w.a,VProgressLinear:O.a,VToolbar:I.a,transitions:A.a}});var C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-toolbar",{attrs:{app:"",dark:e.toggleTheme}},[n("v-menu",{attrs:{"nudge-width":100}},[n("v-toolbar-title",{attrs:{slot:"activator"},slot:"activator"},[n("span",[e._v(e._s(e.getActiveScopeTitle))]),n("v-icon",[e._v("arrow_drop_down")])],1),n("v-list",e._l(e.getScopeTitles,function(t,o){return n("v-list-tile",{key:t},[n("v-list-tile-title",{domProps:{textContent:e._s(t)},on:{click:function(n){return e.onScopeClick(n,t,o)}}})],1)}))],1),n("v-spacer"),n("v-toolbar-title",[e._v(e._s(this.title))])],1),n("v-content",[n("router-view")],1)],1)},N=[],x=n("c93e"),k=n("2f62"),R=n("025e"),H={name:"App",data:function(){return{toggleTheme:!1,title:"Hacker News"}},computed:Object(x["a"])({},Object(k["b"])(["getActiveScopeName","getScopeTitles","getTitle"]),{getActiveScopeTitle:function(){return Object(R["a"])(this.getActiveScopeName)}}),methods:{onScopeClick:function(e,t,n){console.log("onScopeClick - item: ".concat(t," i: ").concat(n)),this.$router.push({name:"scopes",params:{name:t.toLowerCase()}})}}},V=H,W=n("2877"),G=Object(W["a"])(V,C,N,!1,null,null,null);G.options.__file="App.vue";var D=G.exports,L=n("8c4f");o["default"].use(L["a"]);var Y,J=new L["a"]({routes:[{path:"/",redirect:"/new"},{path:"/:name",name:"scopes",component:function(){return n.e("home").then(n.bind(null,"bb51"))}},{path:"/story/:id",name:"story",component:function(){return n.e("story").then(n.bind(null,"095a"))}},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],scrollBehavior:function(e,t,n){return{x:0,y:0}}}),B=n("a322"),M=n("8afe"),$=n("7677"),q=n("2186");o["default"].use(k["a"]);var U="https://hacker-news.firebaseio.com/v0",z={HW_NEW_STORIES:"HW_NEW_STORIES",HW_GET_STORY:"HW_GET_STORY",APP_SET_TITLE:"APP_SET_TITLE",APP_SET_ACTIVE_SCOPE:"APP_SET_ACTIVE_SCOPE",GET_STORY_SCREENSHOT:"GET_STORY_SCREENSHOT"},F=[{name:"top",index:0},{name:"new",index:1},{name:"best",index:2}],K={title:"",activeScopeIndex:0,storyIds:{new:[],top:[],best:[]},stories:[],screenshots:[]},Q=function(e){return(o["default"]._.find(F,["index",e])||{}).name},X=function(e){return(o["default"]._.find(F,["name",e])||{}).index},Z={getStoryIds:function(e,t){return e.storyIds[t.getActiveScopeName]},getStories:function(e){return e.stories},getTitle:function(e){return e.title},getActiveScopeName:function(e){return Q(e.activeScopeIndex)},getScopeTitles:function(){return F.map(function(e){return Object(R["a"])(e.name)})}},ee=function(e,t,n,r){var a=window.localStorage.getItem(t),c=window.localStorage.getItem("".concat(t,"#last_updated_at")),s=Object($["a"])(Object(q["a"])(new Date,1),new Date(c));if(console.log("".concat(t," - useCache: ").concat(s," hwStories: ").concat((a||[]).length)),a&&s){var i=JSON.parse(a);o["default"]._.each(i,function(t){-1===e.storyIds[n].indexOf(t)&&o["default"].set(e.storyIds,n,Object(M["a"])(e.storyIds[n]).concat([t]))}),"function"===typeof r&&r(i)}else console.log("fetch hwStories -> ".concat(n)),fetch("".concat(U,"/").concat(n,"stories.json")).then(function(e){return e.json()}).then(function(e){return new Promise(function(t,n){return o["default"]._.isArray(e)&&!o["default"]._.isEmpty(e)?t(e):n(new Error)})}).then(function(a){window.localStorage.setItem(t,JSON.stringify(a)),window.localStorage.setItem("".concat(t,"#last_updated_at"),new Date),o["default"]._.each(a,function(t){-1===e.storyIds[n].indexOf(t)&&o["default"].set(e.storyIds,n,Object(M["a"])(e.storyIds[n]).concat([t]))}),"function"===typeof r&&r(a)}).catch(console.error)},te=function(e){return"https://www.googleapis.com/pagespeedonline/v1/runPagespeed?url=".concat(e,"&screenshot=true")},ne=function(e,t,n){var r;console.log("getScreenShot");var a=t.id,c=t.url;c&&(r=o["default"]._.find(e.screenshots,["id",a]),r?(console.log("screenshot - from vuex"),"function"===typeof n&&n(r)):(r=window.localStorage.getItem("screenshot-".concat(a)),r?(r=JSON.parse(r),o["default"].set(e,"screenshots",Object(M["a"])(e.screenshots).concat([r])),"function"===typeof n&&n(r)):(console.log("screenshot - from internet"),fetch(te(c)).then(function(e){return e.json()}).then(function(e){return new Promise(function(t,n){return o["default"]._.isEmpty(e)?n(new Error("data is empty")):t(e)})}).then(function(t){var r=t["screenshot"];if(o["default"]._.isEmpty(r))throw new Error("screenshot is empty");o["default"].set(e,"screenshots",Object(M["a"])(e.screenshots).concat([r])),window.localStorage.setItem("screenshot-".concat(a),JSON.stringify(r)),"function"===typeof n&&n(r)}).catch(function(e){return console.error(e.message)}))))},oe=(Y={},Object(B["a"])(Y,z.HW_NEW_STORIES,function(e,t){var n=t.payload,o=t.getters,r=n.name,a=n.callback,c=r||o.getActiveScopeName;ee(e,"HW_".concat(c.toUpperCase()),c,a)}),Object(B["a"])(Y,z.HW_GET_STORY,function(e,t){var n=t.id,r=t.callback,a=window.localStorage.getItem("story-".concat(n)),c=window.localStorage.getItem("story-".concat(n,"#last_updated_at")),s=Object($["a"])(Object(q["a"])(new Date,1),new Date(c));if(console.log("".concat(z.HW_GET_STORY," - story-").concat(n," - useCache: ").concat(s)),a&&s){var i=JSON.parse(a);o["default"].set(e,"stories",Object(M["a"])(e.stories).concat([i])),"function"===typeof r&&r(i)}else console.log("fetch newstories"),fetch("".concat(U,"/item/").concat(n,".json")).then(function(e){return e.json()}).then(function(e){return new Promise(function(t,n){return o["default"]._.isEmpty(e)?n(new Error("data is empty")):t(e)})}).then(function(t){o["default"].set(e,"stories",Object(M["a"])(e.stories).concat([t])),window.localStorage.setItem("story-".concat(n),JSON.stringify(t)),window.localStorage.setItem("story-".concat(n,"#last_updated_at"),new Date),"function"===typeof r&&r(t)}).catch(function(e){return console.error(e.message)})}),Object(B["a"])(Y,z.APP_SET_TITLE,function(e,t){console.log(z.APP_SET_TITLE);var n=t.title;e.title=n}),Object(B["a"])(Y,z.APP_SET_ACTIVE_SCOPE,function(e,t){console.log(z.APP_SET_ACTIVE_SCOPE);var n=t.name;if(n){var o=X(n);-1!==o&&(e.activeScopeIndex=o)}}),Object(B["a"])(Y,z.GET_STORY_SCREENSHOT,function(e,t){console.log(z.GET_STORY_SCREENSHOT);var n=t.id,r=t.callback,a=o["default"]._.find(e.stories,["id",n]);ne(e,a,r)}),Y),re={syncHWNewStoryIDs:function(e,t){var n=e.commit,o=e.getters;n(z.HW_NEW_STORIES,{payload:t,getters:o})},syncHWStory:function(e,t){var n=e.commit;n(z.HW_GET_STORY,t)},setAppTitle:function(e,t){var n=e.commit;n(z.APP_SET_TITLE,t)},setActiveScope:function(e,t){var n=e.commit;n(z.APP_SET_ACTIVE_SCOPE,t)},getStoryScreenshot:function(e,t){var n=e.commit;n(z.GET_STORY_SCREENSHOT,t)}},ae=new k["a"].Store({state:K,getters:Z,mutations:oe,actions:re}),ce=n("415c"),se=n.n(ce),ie=n("ca95"),ue=n.n(ie);o["default"].use(se.a),o["default"].use(ue.a),o["default"].config.productionTip=!1,new o["default"]({router:J,store:ae,render:function(e){return e(D)}}).$mount("#app")}});
//# sourceMappingURL=app.86ff7d6e.js.map