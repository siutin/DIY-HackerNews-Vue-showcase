(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["story"],{"095a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"story"},[t.loading?i("v-progress-circular",{attrs:{indeterminate:!0}}):t._e(),i("v-list",{attrs:{subheader:"","three-line":""}},[i("div",{staticClass:"content"},[i("div",[t._v(t._s(t.item.title))]),i("div",{domProps:{innerHTML:t._s(t.item.text)}}),i("span",{staticClass:"grey--text"},[t._v(t._s(t.formatPostedAt(t.item))+" | @"+t._s(t.item.by))])]),t._l(t.getCleanUpSubItems,function(e,s){return i("div",{key:s},[i("v-divider"),i("div",{staticClass:"content"},[i("div",{domProps:{innerHTML:t._s(e.text)}}),i("span",{staticClass:"grey--text"},[t._v(t._s(t.formatPostedAt(e))+" | @"+t._s(e.by))])])],1)})],2)],1)},n=[],o=i("2b0e"),d=i("c1df"),r=i.n(d),a={name:"Story",components:{},data:function(){return{id:-1,loading:!1,item:{},subItems:[],orderedIds:[]}},computed:{getKids:function(){return this.item.kids},getCleanUpSubItems:function(){var t=this;return this.subItems.filter(function(t){return!t.deleted}).slice().sort(function(e,i){return t.orderedIds.indexOf(e.id)-t.orderedIds.indexOf(i.id)})}},methods:{formatPostedAt:function(t){return r.a.unix(t.time).fromNow()},onApiComplete:function(t){var e=this;console.log("onApiComplete"),this.item=t,this.$store.dispatch("setAppTitle",{title:this.item.title}),this.loading=!1,o["default"]._.each(t.kids,function(t){return e.orderedIds.push(t)}),this.walkThroughComments(t)},walkThroughComments:function(t){var e=this;if(t.id!==this.id){var i=o["default"]._.findIndex(this.orderedIds,function(e){return e===t.id});console.log("index: ".concat(i," id: ").concat(t.id," parentId: ").concat(t.parent," this.orderedIds: ").concat(this.orderedIds)),-1!==i?t.kids&&(console.log("detect kids (id: ".concat(t.id," parentId: ").concat(t.parent,") kids: ").concat(t.kids)),[].splice.apply(this.orderedIds,[i+1,0].concat(t.kids))):console.log("bug? id not found (id: ".concat(t.id," parentId: ").concat(t.parent,") this.orderedIds: ").concat(this.orderedIds)),this.subItems.push(t)}o["default"]._.each(t.kids,function(t){e.$store.dispatch("syncHWStory",{id:t,callback:e.walkThroughComments})})},syncData:function(t){this.loading=!1,t.$store.dispatch("syncHWStory",{id:this.id,callback:this.onApiComplete})}},beforeRouteEnter:function(t,e,i){var s=t.params.id;s&&i(function(t){t.id=s,t.syncData(t)})},beforeRouteUpdate:function(t,e,i){var s=t.params.id;s&&(this.id=s,this.syncData(this),i())},beforeRouteLeave:function(t,e,i){this.$store.dispatch("setAppTitle",{title:""}),i()}},c=a,u=(i("4523"),i("2877")),l=Object(u["a"])(c,s,n,!1,null,"4590b342",null);l.options.__file="Story.vue";e["default"]=l.exports},4523:function(t,e,i){"use strict";var s=i("62c8"),n=i.n(s);n.a},"62c8":function(t,e,i){}}]);
//# sourceMappingURL=story.b493b2f5.js.map