(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["story"],{"095a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"story"},[t.loading?i("v-progress-circular",{attrs:{indeterminate:!0}}):t._e(),i("v-list",{attrs:{subheader:"","three-line":""}},t._l(t.getOrderedList,function(e,s){return i("div",{key:s},[i("v-divider"),i("div",{staticClass:"content"},[e.title?i("div",[t._v(t._s(e.title))]):t._e(),i("div",{domProps:{innerHTML:t._s(e.text)}}),i("span",{staticClass:"grey--text"},[t._v(t._s(t.formatPostedAt(e))+" | @"+t._s(e.by))])])],1)}))],1)},n=[],o=i("8afe"),d=i("2b0e"),r=i("025e"),c={name:"Story",components:{},data:function(){return{id:{default:-1,type:Number},loading:!1,item:{},subItems:[],orderedIds:[]}},computed:{getId:function(){return parseInt(this.id)},getKids:function(){return this.item.kids},getOrderedList:function(){var t=this,e=this.subItems.filter(function(t){return!t.deleted}).slice().sort(function(e,i){return t.orderedIds.indexOf(e.id)-t.orderedIds.indexOf(i.id)});return[this.item].concat(Object(o["a"])(e))}},methods:{formatPostedAt:function(t){return Object(r["b"])(t.time)},onApiComplete:function(t){var e=this;console.log("onApiComplete"),this.item=t,this.$store.dispatch("setAppTitle",{title:this.item.title}),this.loading=!1,d["default"]._.each(t.kids,function(t){return e.orderedIds.push(t)}),this.walkThroughComments(t)},walkThroughComments:function(t){var e=this;if(t.id!==this.getId){var i=d["default"]._.findIndex(this.orderedIds,function(e){return e===t.id});console.log("index: ".concat(i," id: ").concat(t.id," parentId: ").concat(t.parent," this.orderedIds: ").concat(this.orderedIds)),-1!==i?t.kids&&(console.log("detect kids (id: ".concat(t.id," parentId: ").concat(t.parent,") kids: ").concat(t.kids)),[].splice.apply(this.orderedIds,[i+1,0].concat(t.kids))):console.log("bug? id not found (id: ".concat(t.id," parentId: ").concat(t.parent,") this.orderedIds: ").concat(this.orderedIds)),this.subItems.push(t)}d["default"]._.each(t.kids,function(t){e.$store.dispatch("syncHWStory",{id:t,callback:e.walkThroughComments})})},setup:function(t){this.id=t,this.loading=!1,this.$store.dispatch("syncHWStory",{id:this.id,callback:this.onApiComplete})}},beforeRouteEnter:function(t,e,i){i(function(e){return e.setup.bind(e)(t.params.id)})},beforeRouteUpdate:function(t,e,i){this.setup(t.params.id)},beforeRouteLeave:function(t,e,i){this.$store.dispatch("setAppTitle",{title:""}),i()}},a=c,u=(i("8034"),i("2877")),l=Object(u["a"])(a,s,n,!1,null,"e0c48bce",null);l.options.__file="Story.vue";e["default"]=l.exports},"5cb5":function(t,e,i){},8034:function(t,e,i){"use strict";var s=i("5cb5"),n=i.n(s);n.a}}]);
//# sourceMappingURL=story.1953d9c7.js.map