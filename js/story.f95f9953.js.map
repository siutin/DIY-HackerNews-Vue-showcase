{"version":3,"sources":["webpack:///./src/views/Story.vue?9772","webpack:///src/views/Story.vue","webpack:///./src/views/Story.vue?b363","webpack:///./src/views/Story.vue","webpack:///./src/views/Story.vue?24a3"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","indeterminate","_e","subheader","three-line","_l","record","index","key","_v","_s","title","domProps","innerHTML","text","formatPostedAt","by","staticRenderFns","Storyvue_type_script_lang_js_","name","components","data","id","default","type","Number","loading","item","subItems","orderedIds","computed","getId","parseInt","getKids","kids","getOrderedList","_this","orderedComments","filter","subItem","deleted","slice","sort","a","b","indexOf","concat","Object","toConsumableArray","methods","utils","time","onApiComplete","_this2","console","log","$store","dispatch","vue_runtime_esm","_","each","kid","push","walkThroughComments","_this3","findIndex","oid","parent","splice","apply","callback","setup","beforeRouteEnter","to","from","next","vm","bind","params","beforeRouteUpdate","beforeRouteLeave","views_Storyvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Story_vue_vue_type_style_index_0_id_e0c48bce_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Story_vue_vue_type_style_index_0_id_e0c48bce_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/story.f95f9953.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"story\"},[(_vm.loading)?_c('v-progress-circular',{attrs:{\"indeterminate\":true}}):_vm._e(),_c('v-list',{attrs:{\"subheader\":\"\",\"three-line\":\"\"}},_vm._l((_vm.getOrderedList),function(record,index){return _c('div',{key:index},[_c('v-divider'),_c('div',{staticClass:\"content\"},[(record.title)?_c('div',[_vm._v(_vm._s(record.title))]):_vm._e(),_c('div',{domProps:{\"innerHTML\":_vm._s(record.text)}}),_c('span',{staticClass:\"grey--text\"},[_vm._v(_vm._s(_vm.formatPostedAt(record))+\" | @\"+_vm._s(record.by))])])],1)}))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"story\">\n    <v-progress-circular v-if=\"loading\" :indeterminate=\"true\"></v-progress-circular>\n    <v-list subheader three-line>\n\n      <div v-for=\"(record, index) in getOrderedList\" :key=\"index\">\n        <v-divider></v-divider>\n        <div class=\"content\">\n          <div v-if=\"record.title\">{{ record.title }}</div>\n          <div v-html=\"record.text\"></div>\n          <span class=\"grey--text\">{{ formatPostedAt(record) }} | @{{ record.by }}</span>\n        </div>\n      </div>\n\n    </v-list>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { timeFromNow } from '../utils.js'\n\nexport default {\n  name: 'Story',\n  components: {},\n  data () {\n    return {\n      id: {\n        default: -1,\n        type: Number\n      },\n      loading: false,\n      item: {},\n      subItems: [],\n      orderedIds: []\n    }\n  },\n  computed: {\n    getId () { return parseInt(this.id) },\n    getKids () { return this.item.kids },\n    getOrderedList () {\n      let orderedComments = this.subItems.filter(subItem => !subItem.deleted).slice().sort((a, b) => {\n        return this.orderedIds.indexOf(a.id) - this.orderedIds.indexOf(b.id)\n      })\n      return [this.item, ...orderedComments]\n    }\n  },\n  methods: {\n    formatPostedAt (item) { return timeFromNow(item.time) },\n    onApiComplete (data) {\n      console.log(`onApiComplete`)\n      this.item = data\n      this.$store.dispatch('setAppTitle', { title: this.item.title })\n      this.loading = false\n      Vue._.each(data.kids, kid => this.orderedIds.push(kid))\n\n      this.walkThroughComments(data)\n    },\n    walkThroughComments (data) {\n      if (data.id !== this.getId) {\n        let index = Vue._.findIndex(this.orderedIds, oid => oid === data.id)\n        console.log(`index: ${index} id: ${data.id} parentId: ${data.parent} this.orderedIds: ${this.orderedIds}`)\n        if (index !== -1) {\n          if (data.kids) {\n            console.log(`detect kids (id: ${data.id} parentId: ${data.parent}) kids: ${data.kids}`);\n            [].splice.apply(this.orderedIds, [index + 1, 0].concat(data.kids))\n          }\n        } else {\n          console.log(`bug? id not found (id: ${data.id} parentId: ${data.parent}) this.orderedIds: ${this.orderedIds}`)\n        }\n        this.subItems.push(data)\n      }\n\n      Vue._.each(data.kids, kid => {\n        this.$store.dispatch('syncHWStory', {\n          id: kid,\n          callback: this.walkThroughComments\n        })\n      })\n    },\n    setup (id) {\n      this.id = id\n      this.loading = false\n      this.$store.dispatch('syncHWStory', {\n        id: this.id,\n        callback: this.onApiComplete\n      })\n    }\n  },\n  beforeRouteEnter (to, from, next) {\n    next(vm => vm.setup.bind(vm)(to.params.id))\n  },\n  beforeRouteUpdate (to, from, next) {\n    this.setup(to.params.id)\n  },\n  beforeRouteLeave (to, from, next) {\n    this.$store.dispatch('setAppTitle', { title: '' })\n    next()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .story {\n    .content {\n      line-height: 1.5;\n      padding: 10pt;\n    }\n  }\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Story.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Story.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Story.vue?vue&type=template&id=e0c48bce&scoped=true&\"\nimport script from \"./Story.vue?vue&type=script&lang=js&\"\nexport * from \"./Story.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Story.vue?vue&type=style&index=0&id=e0c48bce&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e0c48bce\",\n  null\n  \n)\n\ncomponent.options.__file = \"Story.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Story.vue?vue&type=style&index=0&id=e0c48bce&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Story.vue?vue&type=style&index=0&id=e0c48bce&scoped=true&lang=scss&\""],"sourceRoot":""}