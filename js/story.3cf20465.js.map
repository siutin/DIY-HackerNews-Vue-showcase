{"version":3,"sources":["webpack:///./src/views/Story.vue?f84c","webpack:///src/views/Story.vue","webpack:///./src/views/Story.vue?b363","webpack:///./src/views/Story.vue","webpack:///./src/views/Story.vue?dd24"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","indeterminate","_e","subheader","three-line","_v","_s","item","title","domProps","innerHTML","text","formatPostedAt","by","_l","subItem","index","key","staticRenderFns","Storyvue_type_script_lang_js_","name","components","data","id","loading","subItems","orderedIds","computed","getKids","kids","getCleanUpSubItems","_this","filter","deleted","slice","sort","a","b","indexOf","methods","Object","utils","time","onApiComplete","_this2","console","log","$store","dispatch","vue_runtime_esm","_","each","kid","push","walkThroughComments","_this3","findIndex","oid","concat","parent","splice","apply","callback","syncData","vm","beforeRouteEnter","to","from","next","params","beforeRouteUpdate","beforeRouteLeave","views_Storyvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Story_vue_vue_type_style_index_0_id_2ea8af4d_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Story_vue_vue_type_style_index_0_id_2ea8af4d_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/story.3cf20465.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"story\"},[(_vm.loading)?_c('v-progress-circular',{attrs:{\"indeterminate\":true}}):_vm._e(),_c('v-list',{attrs:{\"subheader\":\"\",\"three-line\":\"\"}},[_c('div',{staticClass:\"content\"},[_c('div',[_vm._v(_vm._s(_vm.item.title))]),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.item.text)}}),_c('span',{staticClass:\"grey--text\"},[_vm._v(_vm._s(_vm.formatPostedAt(_vm.item))+\" | @\"+_vm._s(_vm.item.by))])]),_vm._l((_vm.getCleanUpSubItems),function(subItem,index){return _c('div',{key:index},[_c('v-divider'),_c('div',{staticClass:\"content\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(subItem.text)}}),_c('span',{staticClass:\"grey--text\"},[_vm._v(_vm._s(_vm.formatPostedAt(subItem))+\" | @\"+_vm._s(subItem.by))])])],1)})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"story\">\n    <v-progress-circular v-if=\"loading\" :indeterminate=\"true\"></v-progress-circular>\n    <v-list subheader three-line>\n      <div class=\"content\">\n          <div>{{ item.title }}</div>\n          <div v-html=\"item.text\"></div>\n          <span class=\"grey--text\">{{ formatPostedAt(item) }} | @{{ item.by }}</span>\n      </div>\n      <div v-for=\"(subItem, index) in getCleanUpSubItems\" :key=\"index\">\n        <v-divider></v-divider>\n        <div class=\"content\">\n          <div v-html=\"subItem.text\"></div>\n          <span class=\"grey--text\">{{ formatPostedAt(subItem) }} | @{{ subItem.by }}</span>\n        </div>\n      </div>\n    </v-list>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { timeFromNow } from '../utils.js'\n\nexport default {\n  name: 'Story',\n  components: {},\n  data () {\n    return {\n      id: -1,\n      loading: false,\n      item: {},\n      subItems: [],\n      orderedIds: []\n    }\n  },\n  computed: {\n    getKids () { return this.item.kids },\n    getCleanUpSubItems () {\n      return this.subItems.filter(subItem => !subItem.deleted).slice().sort((a, b) => {\n        return this.orderedIds.indexOf(a.id) - this.orderedIds.indexOf(b.id)\n      })\n    }\n  },\n  methods: {\n    formatPostedAt (item) { return timeFromNow(item.time) },\n    onApiComplete (data) {\n      console.log(`onApiComplete`)\n      this.item = data\n      this.$store.dispatch('setAppTitle', {\n        title: this.item.title\n      })\n      this.loading = false\n      Vue._.each(data.kids, kid => this.orderedIds.push(kid))\n\n      this.walkThroughComments(data)\n    },\n    walkThroughComments (data) {\n      if (data.id !== this.id) {\n        let index = Vue._.findIndex(this.orderedIds, oid => oid === data.id)\n        console.log(`index: ${index} id: ${data.id} parentId: ${data.parent} this.orderedIds: ${this.orderedIds}`)\n        if (index !== -1) {\n          if (data.kids) {\n            console.log(`detect kids (id: ${data.id} parentId: ${data.parent}) kids: ${data.kids}`);\n            [].splice.apply(this.orderedIds, [index + 1, 0].concat(data.kids))\n          }\n        } else {\n          console.log(`bug? id not found (id: ${data.id} parentId: ${data.parent}) this.orderedIds: ${this.orderedIds}`)\n        }\n        this.subItems.push(data)\n      }\n\n      Vue._.each(data.kids, kid => {\n        this.$store.dispatch('syncHWStory', {\n          id: kid,\n          callback: this.walkThroughComments\n        })\n      })\n    },\n    syncData (vm) {\n      this.loading = false\n      vm.$store.dispatch('syncHWStory', {\n        id: this.id,\n        callback: this.onApiComplete\n      })\n    }\n  },\n  beforeRouteEnter (to, from, next) {\n    let id = to.params.id\n    if (id) {\n      next(vm => {\n        vm.id = id\n        vm.syncData(vm)\n      })\n    }\n  },\n  beforeRouteUpdate (to, from, next) {\n    let id = to.params.id\n    if (id) {\n      this.id = id\n      this.syncData(this)\n      next()\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    this.$store.dispatch('setAppTitle', {\n      title: ''\n    })\n    next()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .story {\n    .content {\n      line-height: 1.5;\n      padding: 10pt;\n    }\n  }\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Story.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Story.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Story.vue?vue&type=template&id=2ea8af4d&scoped=true&\"\nimport script from \"./Story.vue?vue&type=script&lang=js&\"\nexport * from \"./Story.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Story.vue?vue&type=style&index=0&id=2ea8af4d&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ea8af4d\",\n  null\n  \n)\n\ncomponent.options.__file = \"Story.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Story.vue?vue&type=style&index=0&id=2ea8af4d&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Story.vue?vue&type=style&index=0&id=2ea8af4d&scoped=true&lang=scss&\""],"sourceRoot":""}