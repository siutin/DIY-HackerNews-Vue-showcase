(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"20f7":function(t,e,i){"use strict";var n=i("3e12"),s=i.n(n);s.a},"2d54":function(t,e,i){"use strict";var n=i("32ab"),s=i.n(n);s.a},"32ab":function(t,e,i){},"3e12":function(t,e,i){},"996c":function(t,e,i){"use strict";function n(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}var s=n(i("b727")),o=function(t,e){void 0===e&&(e={});var i=e.offset;void 0===i&&(i={});var n=e.threshold,s=t.getBoundingClientRect(),o=s.top,a=s.right,r=s.bottom,c=s.left,l=s.width,d=s.height,u={t:r,r:window.innerWidth-c,b:window.innerHeight-o,l:a},h={x:n*l,y:n*d};return u.t>=(i.top||0+h.y)&&u.r>=(i.right||0+h.x)&&u.b>=(i.bottom||0+h.y)&&u.l>=(i.left||0+h.x)},a=["scroll","resize"],r={name:"mugen-scroll",props:{handler:{type:Function,required:!0},shouldHandle:{type:Boolean,default:!0},threshold:{type:Number,default:0},handleOnMount:{type:Boolean,default:!0},scrollContainer:{type:String}},mounted:function(){this.checkInView()},methods:{checkInView:function(){var t=this,e=function(){var e=o(t.$refs.scroll,{threshold:t.threshold});t.shouldHandle&&e&&t.handler()};if(this.handleOnMount&&e(),this.scrollContainer){var i=this;while((i=i.$parent)&&!this._scrollContainer)t._scrollContainer=i.$refs[t.scrollContainer];this._scrollContainer&&this._scrollContainer.$el&&(this._scrollContainer=this._scrollContainer.$el)}this._scrollContainer=this._scrollContainer||window,this.check=s(e,200),a.forEach(function(e){return t._scrollContainer.addEventListener(e,t.check)})}},render:function(t){return t("div",{staticClass:"mugen-scroll",ref:"scroll"},this.$slots.default)},beforeDestroy:function(){var t=this;a.forEach(function(e){return t._scrollContainer.removeEventListener(e,t.check)})}};"undefined"!==typeof window&&window.Vue&&window.Vue.component(r.name,r),t.exports=r},b727:function(t,e){function i(t,e){var i,n,s,o,a=0;return function(){i=this,n=arguments;var t=new Date-a;return o||(t>=e?r():o=setTimeout(r,e-t)),s};function r(){o=0,a=+new Date,s=t.apply(i,n),i=null,n=null}}t.exports=i},bb51:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-slide-y-transition",{attrs:{mode:"out-in"}},[i("div",{staticClass:"home"},[i("v-list",[t._l(t.getPaginatedIds,function(e,n){return[i("row-item",{key:n,attrs:{index:n,id:e,"max-scrolled-page":t.maxScrolledPage,"max-rows-per-page":t.getMaxRowsPerPage}})]}),i("v-layout",{attrs:{"align-center":"","justify-center":""}},[i("mugen-scroll",{attrs:{handler:t.updateScrollPage,"should-handle":!t.loading}},[i("v-progress-circular",{attrs:{indeterminate:!0}})],1)],1)],2)],1)])},s=[],o=i("c93e"),a=i("996c"),r=i.n(a),c=i("2f62"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"row-item",attrs:{id:"row-item"+this.id}},[t._.isEmpty(t.item)?i("v-progress-linear",{attrs:{indeterminate:!0}}):i("div",{staticClass:"wrapper"},[i("v-touch",{attrs:{"swipe-options":{direction:"horizontal"}},on:{swipeleft:t.onSwipeLeft,swiperight:t.onSwipeRight,tap:t.resetState}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasImage,expression:"hasImage"}],staticClass:"image"},[t._.isEmpty(t.image)?i("v-progress-circular",{attrs:{indeterminate:!0}}):t._e(),i("transition",{attrs:{name:"fade"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:!t._.isEmpty(t.image),expression:"!_.isEmpty(image)"}],attrs:{src:t.image}})])],1),i("div",[i("div",{staticClass:"visit-link"},[i("div",{staticClass:"text",on:{click:t.openVistLink}},[t._v("Go")])]),i("div",{staticClass:"discuss-link"},[i("router-link",{staticClass:"text",attrs:{to:{name:"story",params:{id:this.id}}}},[t._v("Discuss")])],1)]),i("div",{staticClass:"static animate",style:{transform:"translateX("+t.staticX+"px) translateY(-85px)",width:t.getClientWidth+"px"}},[i("div",[i("div",{},[t._v(t._s(t.item.title))]),i("span",{staticClass:"grey--text"},[t._v(t._s(t.getPostedAt)+" | @"+t._s(t.item.by)+" | "+t._s(t.getCommentCount)+" comments ")])])])])],1)],1)},d=[],u=i("025e"),h={name:"RowItem",props:{index:Number,id:Number,maxScrolledPage:Number,maxRowsPerPage:Number},data:function(){return{swipeDirection:"None",showVisitLink:!1,showDiscussLink:!1,staticX:0,item:{},image:""}},watch:{id:function(t,e){var i=this;this.$store.dispatch("syncHWStory",{id:this.id,callback:function(t){i.onApiComplete(t),i.resetState()}})}},computed:{getPostedAt:function(){return Object(u["b"])(this.item.time)},getCommentCount:function(){return this.item.descendants},getClientWidth:function(){return document.body.clientWidth},getStaticClasses:function(){return this.staticClasses},hasImage:function(){return void 0!==this.item.url}},methods:{onApiComplete:function(t){var e=this;console.log("onApiComplete - id: ".concat(this.id)),this.item=t,this.$store.dispatch("getStoryScreenshot",{id:this.id,callback:function(t){var i=t.data.replace(/_/g,"/").replace(/-/g,"+");e.image="data:image/jpeg;base64,".concat(i)}})},onSwipeLeft:function(){this.showVisitLink?this.resetState():this.displayDiscussLink()},onSwipeRight:function(){this.showDiscussLink?this.resetState():this.displayVisitLink()},displayVisitLink:function(){this.controlState(!1,!0,100)},displayDiscussLink:function(){this.controlState(!0,!1,-100)},resetState:function(t){this.controlState(!1,!1,0)},controlState:function(t,e,i){console.log("controlState - svl: ".concat(t," sdl: ").concat(e," sx: ").concat(i)),this.showVisitLink=t,this.showDiscussLink=e,this.staticX=i},openVistLink:function(t){console.log("openVistLink - id: ".concat(this.id)),this.item&&this.item.url&&(window.location.href=this.item.url)}},created:function(){console.log("RowItem - created"),this.$store.dispatch("syncHWStory",{id:this.id,callback:this.onApiComplete})}},m=h,p=(i("20f7"),i("2877")),f=Object(p["a"])(m,l,d,!1,null,"6d4c5d2b",null);f.options.__file="RowItem.vue";var g=f.exports,v=88,w={name:"Home",components:{RowItem:g,MugenScroll:r.a},data:function(){return{maxScrolledPage:0,loading:!0}},computed:Object(o["a"])({},Object(c["b"])(["getStoryIds"]),{getPaginatedIds:function(){return this.getStoryIds.slice().sort().reverse().slice(0,this.getMaxRowsPerPage*this.maxScrolledPage)},getMaxRowsPerPage:function(){return Math.ceil((window.innerHeight-56)/v)+1}}),methods:{onRefreshClicked:function(){console.log("onRefreshClicked"),this.updateData(this)},syncData:function(t,e){t.$store.dispatch("syncHWNewStoryIDs",{name:e})},setActiveScope:function(t,e){t.$store.dispatch("setActiveScope",{name:e})},updateScrollPage:function(){console.log("updateScrollPage"),this.loading=!0,this.maxScrolledPage++,this.loading=!1}},beforeRouteEnter:function(t,e,i){var n=t.params.name;i(function(t){t.setActiveScope(t,n),t.syncData(t,n)})},beforeRouteUpdate:function(t,e,i){var n=t.params.name;this.setActiveScope(this,n),this.syncData(this,n),i()},mounted:function(){this.updateScrollPage()}},y=w,C=(i("2d54"),Object(p["a"])(y,n,s,!1,null,"3514ab0b",null));C.options.__file="Home.vue";e["default"]=C.exports}}]);
//# sourceMappingURL=home.64c6808c.js.map